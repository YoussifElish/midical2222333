<div class="container mt-4 mb-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Medical Consultations</h2>
    <button class="btn btn-primary" routerLink="/consultations/ask">Ask a New Question</button>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Question List -->
  <div *ngIf="!isLoading && !error && questions.length > 0" class="list-group">
    <!-- Corrected: Ensure the <a> tag is properly structured -->
    <a *ngFor="let question of questions" [routerLink]="['/consultations', question.id]" class="list-group-item list-group-item-action flex-column align-items-start mb-3 shadow-sm border rounded">
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1 color-2">{{ question.title }}</h5>
        <small class="text-muted">{{ question.createdIn| date:":short" }}</small>
      </div>
      <p class="mb-1">{{ question.content | slice:0:150 }}{{ question.content.length > 150 ? "..." : "" }}</p>
      <small class="text-muted">Asked by: {{ question.userName }}</small>
      <div class="d-flex justify-content-end mt-2">
        <span class="badge bg-light text-dark me-2"><i class="fas fa-thumbs-up text-success"></i> {{ question.upvotes || 0 }}</span>
        <span class="badge bg-light text-dark"><i class="fas fa-thumbs-down text-danger"></i> {{ question.downvotes || 0 }}</span>
      </div>
    </a> <!-- Closing tag now correctly matches the opening tag on line 22 -->
  </div>

  <!-- No Questions Message -->
  <div *ngIf="!isLoading && !error && questions.length === 0" class="text-center text-muted mt-5">
    <p>No questions have been asked yet. Be the first!</p>
  </div>

</div>

